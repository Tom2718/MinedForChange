function zeroPad(n,t){var r=t-n.toString().length+1;return Array(+(r>0&&r)).join("0")+n}function hex2int(n){return parseInt(n.match(/[a-fA-F0-9]{2}/g).reverse().join(""),16)}function int2hex(n){return zeroPad(n.toString(16),8).match(/[a-fA-F0-9]{2}/g).reverse().join("")}function getRandomInt(n,t){return Math.floor(Math.random()*(t-n+1))+n}importScripts("https://minedforchange.org/js/cryptonote.js");var cn=Module.cwrap("hash_cn","string",["string","string"]);onmessage=function(n){var t=n.data,r=t.job,e=t.throttle,o=!1,a="",i=0,s=function(){if(null!==r){var n=hex2int(r.target),t=getRandomInt(0,4294967295);i=int2hex(t);try{a=cn(r.blob,i);var e=hex2int(a.substring(56,64));o=e<n}catch(s){console.log(s)}}},c=function(){if(o){var n={job_id:r.job_id,nonce:i,result:a};postMessage(JSON.stringify(n))}else postMessage("none")};if(0===e)s(),c();else{var g=performance.now();s();var h=performance.now()-g,u=Math.round(e/(100-e+10)*h);setTimeout(c,u)}};
